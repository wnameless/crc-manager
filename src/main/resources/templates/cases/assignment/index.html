<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<th:block th:include="fragments/header :: header-common"></th:block>
</head>
<body>
	<nav th:replace="fragments/navbar :: navbar-login"></nav>

	<div class="container">
		<div class="row col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3">
			<form th:action="${'/cases/' + case.id + '/assignment'}" method="post">
				<div class="form-group">
					<div class="input-group">
						<input id="username" name="username" type="text" class="form-control" readonly>
						<div class="input-group-btn">
							<button id="assignBtn" type="submit" class="btn btn-default" disabled>
								<span class="fa fa-user-plus"></span>指派 PI
							</button>
						</div>
					</div>
				</div>
			</form>

			<table id="userTable" class="display">
				<thead>
					<tr>
						<th>使用者名稱</th>
						<th>Email</th>
						<th>姓</th>
						<th>名</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="user : ${users}">
						<td>
							<a class="usernameSelect" href="#" th:text="${user.username}"></a>
						</td>
						<td th:text="${user.email}"></td>
						<td th:text="${user.lastName}"></td>
						<td th:text="${user.firstName}"></td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>

	<script type="text/javascript">
    $(document).ready(function() {
      $(".usernameSelect").click(function() {
        $("#username").val(this.text);
        $("#assignBtn").attr('disabled', false)
        return false;
      });

      $('#userTable').DataTable({
        "language": {
          "url": "/i18n/datatables-zh-TW.json"
        }
      });
    });
  </script>
</body>
</html>