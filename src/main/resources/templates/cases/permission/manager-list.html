<html xmlns:th="http://www.thymeleaf.org">
<ul th:fragment="manager-list" id="managerList" class="list-group"
	style="overflow-y: scroll; max-height: 200px; padding: 10px 10px;">
	<li class="list-group-item">
		<span id="manager" th:text="#{ui.permission.manager.select}"></span>
		<i id="addManager" class="fa fa-plus pull-right"
			style="color: green; margin-top: 3px;"></i>
	</li>
	<li class="list-group-item" th:each="manager : ${case.managers}">
		<span th:text="${manager}"></span>
		<i th:attr="val=${manager}"
			class="removeManager fa fa-times pull-right"
			style="color: red; margin-top: 3px;"></i>
	</li>

	<script th:replace="fragments/notify :: notify"></script>
	<script type="text/javascript" th:inline="javascript">
    $('#addManager').click(function() {
      if (!$('#manager').val()) return false;

      axios.post('/cases/[[${case.id}]]/permission/managers', {
        manager: $('#manager').val()
      }).then(function(response) {
        $('#managerList').html(response.data);

        $('#manager').text(/*[[#{ui.permission.manager.select}]]*/null);
        $('#manager').val('');
        $('#editor').text(/*[[#{ui.permission.editor.select}]]*/null);
        $('#editor').val('');
        $('#viewer').text(/*[[#{ui.permission.viewer.select}]]*/null);
        $('#viewer').val('');
      });

      return false;
    });

    $('.removeManager').click(function() {
      axios.delete('/cases/[[${case.id}]]/permission/managers', {
        params: {
          manager: $(this).attr('val')
        }
      }).then(function(response) {
        $('#managers').html(response.data);
      });

      return false;
    });
  </script>
</ul>
</html>