<html xmlns:th="http://www.thymeleaf.org">
<ul th:fragment="manager-list" id="managerList" class="list-group"
	style="overflow-y: scroll; max-height: 200px; padding: 10px 10px;">
	<li class="list-group-item"><span id="manager">請選擇管理者</span><i
		id="addManager" class="fa fa-plus pull-right"
		style="color: green; margin-top: 3px;"></i></li>
	<li class="list-group-item" th:each="manager : ${case.managers}"><span
			th:text="${manager}"></span><i th:attr="val=${manager}"
		class="removeManager fa fa-times pull-right"
		style="color: red; margin-top: 3px;"></i></li>

	<script th:inline="javascript">
$("#addManager").click(function() {
  if(!$("#manager").val()) return false;
  axios.post('/cases/[[${case.id}]]/permission/managers', {
    		manager: $("#manager").val()
  	})
	.then(function (response) {
		$('#managerList').html(response.data);
		
		$("#manager").text('請選擇管理者');
        $("#manager").val('');
        $("#editor").text('請選擇編輯者');
        $("#editor").val('');
        $("#viewer").text('請選擇閱覽者');
        $("#viewer").val('');
	})
	.catch(function (error) {
		console.log(error);
	});
  return false;
});

$(".removeManager").click(function() {
  axios.delete('/cases/[[${case.id}]]/permission/managers', {
      params: {
	    manager: $(this).attr('val')
	}
})
.then(function (response) {
$('#managers').html(response.data);
})
.catch(function (error) {
console.log(error);
});
return false;
});
</script>
</ul>
</html>