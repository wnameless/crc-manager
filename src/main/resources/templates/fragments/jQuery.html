<html xmlns:th="http://www.thymeleaf.org">

<script th:fragment="oof" type="text/javascript">
	$(function () {
		let oofValues = [];

		$('.oof-input-checkbox').change(function () {
			if (this.checked) {
				oofValues.push(this.value);
			} else {
				oofValues.splice($.inArray(this.value, oofValues), 1);
			}

			$('input[name="oofValues"]').remove();
			$('.oof-input-form').each(function () {
				oofValues.forEach(val => {
					$('<input>').attr({
						type: 'hidden',
						name: 'oofValues',
						value: val
					}).appendTo(this);
				});
			});
		});
	});
</script>

</html>