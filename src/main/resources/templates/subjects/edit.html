<html xmlns:th="http://www.thymeleaf.org">
<div th:fragment="partial">
    <div class="row col-sm-12 col-md-10 col-md-offset-1 col-lg-8 col-lg-offset-2">
        <h3
            th:replace="fragments/form :: title(text=${parent.trialName}, backUrl=${parent.joinPath(childPath)})">
        </h3>
        <hr>
        <div id="jsfForm"></div>
    </div>

    <script type="text/javascript" th:inline="javascript">
        $(function () {
            let onSubmit = (f) => {
                axios.post( /*[[${parent.withChild(child).updatePath}]]*/ null, f.formData)
                    .then((response) => {
                        $('#jsf').html(response.data);
                    });
            };

            let rjsfOpt = Object.assign({
                btnText: /*[[#{rjsf.submit}]]*/'送出',
                onSubmit: onSubmit
            }, /*[[${child.toRjsfMap()}]]*/ {});

            ReactDOM.render(React.createElement(ReactJSF, rjsfOpt),
                document.getElementById('jsfForm'));

            $('input[type="date"]').attr({
                min: '1900-01-01',
                max: '2100-12-31'
            });
        });
    </script>
</div>

</html>