<html xmlns:th="http://www.thymeleaf.org">
<div th:fragment="edit">
    <div class="row col-sm-12 col-md-10 col-md-offset-1 col-lg-8 col-lg-offset-2">
        <h3 th:replace="fragments/form :: title(text=${case.trialName}, backUrl='/cases/' + ${case.id} + '/subjects/index')"></h3>
        <hr>
        <div id="jsfForm"></div>
    </div>

    <script type="text/javascript" th:inline="javascript">
        $(function () {
            let schema = JSON.parse( /*[[${jsfItem.schema}]]*/ null);
            let uiSchema = JSON.parse( /*[[${jsfItem.uiSchema}]]*/ null);
            let formData = JSON.parse( /*[[${jsfItem.formData}]]*/ null);

            let onSubmit = function (f) {
                axios.post( /*[[${jsfPath}]]*/ null, f.formData).then(function (response) {
                    $('#jsf').html(response.data);
                });
            };

            ReactDOM.render(React.createElement(CostumFormComponent, {
                schema: schema,
                uiSchema: uiSchema,
                formData: formData,
                onSubmit: onSubmit,
                btnText: '送出'
            }), document.getElementById('jsfForm'));
        });
    </script>
</div>

</html>