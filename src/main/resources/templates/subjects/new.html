<html xmlns:th="http://www.thymeleaf.org">
<div th:fragment="new">
	<div
		class="row col-sm-12 col-md-10 col-md-offset-1 col-lg-8 col-lg-offset-2">
		<h3 th:inline="text">
			<span class="glyphicon glyphicon-list-alt"></span>
			[[${case.trialName}]]
			<a th:href="@{'/cases/' + ${case.id} + '/subjects/index'}">
				<span class="fa fa-undo" style="color: green;"></span>
			</a>
		</h3>
		<hr>
		<div class="row">
			<div class="col-sm-2"></div>
			<div class="col-sm-6">
				<input type="text" class="form-control"
					th:placeholder="#{ui.subject.nationalid}">
			</div>
			<div class="col-sm-4">
				<button id="queryBtn" class="btn btn-primary"
					th:text="#{ui.subject.search}"></button>
			</div>
		</div>
		<hr />
		<div id="jsfForm"></div>
	</div>

	<script type="text/javascript" th:inline="javascript">
	var schema = JSON.parse([[${jsfItem.jsonSchema}]]);
	var uiSchema = JSON.parse([[${jsfItem.jsonUiSchema}]]);
	var formData = JSON.parse([[${jsfItem.jsonData}]]);
	
	var onSubmit = ({formData}) => {
		axios.post([[${jsfPath}]], formData).then(function (response) {
				console.log(response);
				$('#jsf').html(response.data);
			})
			.catch(function (error) {
				console.log(error);
			});
	};
	
	ReactDOM.render(
    	React.createElement(FormComponent),
    	document.getElementById('jsfForm')
    );
	
	$(function(){
		$('#queryBtn').click(function() {
			$.notify([[#{ui.subject.message.id-no-data}]]);
		});
	});
    </script>
</div>
</html>